openapi: 3.0.0
info:
  version: 1.0.0
  title: LBAW MediaLibrary Web API
  description: Web Resources Specification (A7) for MediaLibrary
servers:
  - url: https://git.fe.up.pt./lbaw/lbaw2324
    description: Production server
externalDocs:
  description: Find out more about our project here.
  url: https://git.fe.up.pt./lbaw/lbaw2324
tags:
  - name: M01-Authentication and Individual Profile
    description:
      Web resources associated with user authentication, including login/logout,
      registration, view, and edit personal profile information.
  - name: M02-Event
    description:
      Web resources associated with events, including view, edit, and delete
      events.
  - name: M03-Participants
    description:
      Web resources associated with event participation management, including
      view, add, and remove participants of a specific event.
paths:
  /login:
    post:
      summary: Login
      description:' Login. Access: PUB'
      tags:
        - M01-Authentication and Individual Profile
      requestBody:
        required: true
        content:
          application/x-www-form-urlencoded:
            schema:
              type: object
              properties:
                email:
                  type: string
                password:
                  type: string
              required:
                - email
                - password
      responses:
        "200":
          description: Login successful
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Login successful
                  user:
                    $ref: "#/components/schemas/User"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Invalid credentials
  /logout:
    post:
      summary: Logout
      description: "Logout. Access: USER"
      tags:
        - M01-Authentication and Individual Profile
      responses:
        "200":
          description: Logout successful
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Logout successful
        "400":
          description: Unauthorized
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Invalid Credentials
  /register:
    post:
      summary: Register
      description: "Register. Access: PUB"
      tags:
        - M01-Authentication and Individual Profile
      requestBody:
        required: true
        content:
          application/x-www-form-urlencoded:
            schema:
              type: object
              properties:
                username:
                  type: string
                email:
                  type: string
                password:
                  type: string
                password_confirmation:
                  type: string
              required:
                - username
                - email
                - password
                - password_confirmation
      responses:
        "200":
          description: Registration successful
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Registration successful
                  user:
                    $ref: "#/components/schemas/User"
        "400":
          description: Invalid data
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Invalid data
        "403":
          description: Already registered
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Already registered
  /profile:
    get:
      summary: Get profile
      description: "Get profile. Access: USER"
      tags:
        - M01-Authentication and Individual Profile
      responses:
        "200":
          description: Profile information
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/User"
        "403":
          description: Unauthorized
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Unauthorized
  /create_event:
    post:
      summary: Create event
      description: "Create event. Access: USER"
      tags:
        - M02-Event
      requestBody:
        required: true
        content:
          application/x-www-form-urlencoded:
            schema:
              $ref: "#/components/schemas/EventRequest"
      responses:
        "200":
          description: Event created
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Event created
                  event:
                    $ref: "#/components/schemas/Event"
        "400":
          description: Invalid data
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Invalid data
        "403":
          description: Unauthorized
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Unauthorized
  /delete_event:
    post:
      summary: Delete event
      description: "Delete event. Access: OWN&ADM"
      tags:
        - M02-Event
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                event_id:
                  type: integer
              required:
                - event_id
      responses:
        "200":
          description: Event deleted
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Event deleted
        "400":
          description: Invalid data
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Invalid data
        "403":
          description: Unauthorized
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Unauthorized
  /edit_event:
    post:
      summary: Edit event
      description: "Edit event. Access: OWN&ADM"
      tags:
        - M02-Event
      requestBody:
        required: true
        content:
          application/x-www-form-urlencoded:
            schema:
              $ref: "#/components/schemas/EditEventRequest"
      responses:
        "200":
          description: Event edited
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Event edited
                  event:
                    $ref: "#/components/schemas/Event"
        "400":
          description: Invalid data
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Invalid data
        "403":
          description: Unauthorized
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Unauthorized
